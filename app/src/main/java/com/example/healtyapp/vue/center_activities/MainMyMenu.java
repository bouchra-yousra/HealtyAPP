package com.example.healtyapp.vue.center_activities;import android.annotation.SuppressLint;import android.content.Intent;import android.content.SharedPreferences;import android.os.Bundle;import android.widget.Toast;import com.example.healtyapp.R;import com.example.healtyapp.database_item.AlimentData;import com.example.healtyapp.dialogue.TestInflate;import com.example.healtyapp.database_item.Aliment;import com.example.healtyapp.module.ExerciceCognitive;import com.example.healtyapp.module.ExercicePhysique;import com.example.healtyapp.module.User;import com.example.healtyapp.ui.activityphysic.MainChrono;import com.google.android.material.bottomnavigation.BottomNavigationView;import com.google.firebase.database.DataSnapshot;import com.google.firebase.database.DatabaseError;import com.google.firebase.database.DatabaseReference;import com.google.firebase.database.FirebaseDatabase;import com.google.firebase.database.ValueEventListener;import androidx.annotation.NonNull;import androidx.appcompat.app.AppCompatActivity;import androidx.navigation.NavController;import androidx.navigation.Navigation;import androidx.navigation.ui.AppBarConfiguration;import androidx.navigation.ui.NavigationUI;import java.util.ArrayList;import java.util.Calendar;import java.util.HashMap;/** * has all the important information of a user */public class MainMyMenu extends AppCompatActivity implements TestInflate.TestInflateLisnner {    //GLOBALE:    //__user infos    public static double kca;    public static double bes_eau;    public static String sexe;    public static double poids;    //__SharedPreferences    public static final String Share = "UserData";    public static final String MyUser = "MyUser";    SharedPreferences sharedPreferences;    //____Shared elements    public static final String PROGRESS_NUTRITION = "progress_nutrition";    public static final String PROGRESS_PHYSIQUE = "progress_physique";    public static final String PROGRESS_COGNITIVE = "progress_cognitive";    public static final String PROGRESS_COGNITIVE_TIME = "progress_cognitive_time";    //database    DatabaseReference myDatabase,myDatabase2;    public static ArrayList<Aliment> arrayList = new ArrayList<>();    public static ArrayList<ExercicePhysique> exercicePhysiqueArrayList = new ArrayList<>();    public static ArrayList<ExerciceCognitive> exerciceCognitives = new ArrayList<>();    public static User user ;    public static HashMap maladie_exo = new HashMap();    //collection the intfos (progressions)    public static int progress_physique;    public static int progress_cognitive;    public static int progress_nutrition;    public static int progress_water;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.my_menu);        sharedPreferences = getSharedPreferences(Share,MODE_PRIVATE);        BottomNavigationView navView = findViewById(R.id.nav_view);        kca = getIntent().getDoubleExtra("Kca", 99);        bes_eau = getIntent().getDoubleExtra("ml", 0);        sexe = getIntent().getStringExtra("Sexe");        //double p = Double.parseDouble(user.getPoids());        double p;        //p=52;        assert user.getPoids() != null;        //p = Double.parseDouble(user.getPoids());        poids = getIntent().getDoubleExtra("Poids",50);        //get all aliments saved on databse        getAll();        //get all activities 'physique' from the database        getAllEXOS();        getExoM();        methode();        //create un botton navigation menu with passsing the layout id for all the menu fragments        AppBarConfiguration appBarConfiguration = new AppBarConfiguration.Builder(                R.id.navigation_home, R.id.navigation_activityphysic, R.id.navigation_activitymorale,                R.id.navigation_nuttrision, R.id.navigation_profile)                .build();        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);//        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration);        NavigationUI.setupWithNavController(navView, navController);        initapp();        //get infos//        progress_physique = ActivityphysicFragment.progressBar.getProgress();//        progress_nutrition = NutritionFragment.progressBar.getProgress();        // progress_water = NutritionFragment.progressBareau.getProgress();        // progress_water = NutritionFragment.progressBareau.getProgress();    }    //get all aliments saved on databse    public void getAll() {        myDatabase = FirebaseDatabase.getInstance().getReference().child("Aliments");        arrayList =  new ArrayList<>();        myDatabase.addValueEventListener(new ValueEventListener() {            @Override            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {                for (DataSnapshot snapshot : dataSnapshot.getChildren()) {                    Aliment aliment = snapshot.getValue(Aliment.class);                    //Add a new aliment in static arrayList                    arrayList.add(aliment);                }            }            @Override            public void onCancelled(@NonNull DatabaseError databaseError) {            }        });    }    //get all activities 'physique' from the database    public void getAllEXOS() {        myDatabase = FirebaseDatabase.getInstance().getReference().child("ActivityPh");        exercicePhysiqueArrayList = new ArrayList<>();        myDatabase.addValueEventListener(new ValueEventListener() {            @Override            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {                for (DataSnapshot snapshot : dataSnapshot.getChildren()) {                    ExercicePhysique exercicePhysique = snapshot.getValue(ExercicePhysique.class);                    //Add ActPh in static arraylist                    exercicePhysiqueArrayList.add(exercicePhysique);                }            }            @Override            public void onCancelled(@NonNull DatabaseError databaseError) {            }        });    }    private void getExoM(){        myDatabase2 =FirebaseDatabase.getInstance().getReference().child("ActivityM");        exerciceCognitives = new ArrayList<>();        myDatabase2.addValueEventListener(new ValueEventListener() {            @Override            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {                for(DataSnapshot snapshot : dataSnapshot.getChildren()){                    ExerciceCognitive exerciceCognitive = snapshot.getValue(ExerciceCognitive.class);                    exerciceCognitives.add(exerciceCognitive);                }            }            @Override            public void onCancelled(@NonNull DatabaseError databaseError) {            }        });    }    public void methode(){        Toast.makeText(getApplicationContext(),"MENU",Toast.LENGTH_SHORT).show();    }    //metohde of the interface TestInflate that make us get the data wrote on the Inflate Layout    @Override    public void applyTexts(int calories, double time, ExercicePhysique exercicePhysique) {        //get data and prepare them        Intent intent = new Intent(MainMyMenu.this, MainChrono.class);        intent.putExtra("Time",time);        MainChrono.exercicePhysique = exercicePhysique;        //launch ChronoActivty        startActivity(intent);    }    public void maladie_exo_list (){        maladie_exo.put(1,"");    }    ///CLEAR    void clear () {        AlimentData.nb = 0;    }    @SuppressLint("CommitPrefEdits")    void initapp () {        if (sharedPreferences.contains("init_day")) {            if (sharedPreferences.getInt("init_day",Calendar.DAY_OF_MONTH) < Calendar.DAY_OF_MONTH) {                sharedPreferences.edit().clear();                sharedPreferences.edit().apply();                clear();            }        } else {            sharedPreferences.edit().putInt("init_day",Calendar.DAY_OF_MONTH);            sharedPreferences.edit().apply();        }    }}